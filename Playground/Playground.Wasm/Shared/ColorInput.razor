@using MaterialColorUtilities.Utils
@using System.Globalization
@using MudBlazor.Utilities
@inherits SeedColorSelector

<MudColorPicker
    @bind-Value="@Color"
    ColorPickerMode="@ColorPickerMode.HEX"
    Label="Seed color"
    PickerVariant="@PickerVariant.Static"
    Elevation="1"
    DisableAlpha="true"
    DisablePreview="true" />

@code {
    MudColor _color;
    MudColor Color
    {
        get => _color;
        set
        {
            if (_color == value) return;
            _color = value;
            int color = ColorUtils.ArgbFromRgb(
                value.R,
                value.G,
                value.B
            );
            ThemeService.SetSeed(color, this);
        }
    }

    protected override void SetFromSeed(int seed)
    {
        _color = StringUtils.HexFromArgb(seed);
    }
}
